# Лабораторная работа 2: Установка Git на сервер

## Цель:
Научиться устанавливать и настраивать Git-репозиторий на сервере для работы в команде с использованием SSH-доступа.

## Теоретическая часть:
Для организации совместной работы с использованием Git необходимо настроить сервер с репозиториями. В данной лабораторной работе мы научимся создавать голые (bare) репозитории и предоставлять доступ по SSH для разработчиков.

## Шаги для выполнения:

### Шаг 1: Создание голого репозитория
1. Создайте новый голый репозиторий на вашем компьютере:
   ```bash
   git clone --bare /path/to/your_project your_project.git
   ```

2. Подтвердите, что репозиторий был создан успешно:
   ```bash
   ls your_project.git
   ```

### Шаг 2: Копирование репозитория на сервер
1. Скопируйте репозиторий на сервер с помощью команды `scp`:
   ```bash
   scp -r your_project.git user@your_server:/srv/git
   ```

2. Подтвердите, что репозиторий был скопирован на сервер:
   ```bash
   ssh user@your_server
   ls /srv/git
   ```

### Шаг 3: Настройка репозитория на сервере
1. Инициализируйте репозиторий на сервере с параметром `--shared`, чтобы разрешить доступ группе пользователей:
   ```bash
   ssh user@your_server
   cd /srv/git/your_project.git
   git init --bare --shared
   ```

### Шаг 4: Доступ к репозиторию через SSH
1. На локальной машине клонируйте репозиторий с сервера:
   ```bash
   git clone user@your_server:/srv/git/your_project.git
   ```

2. Сделайте изменения в локальном репозитории и отправьте их на сервер:
   ```bash
   echo "New update" >> file.txt
   git add file.txt
   git commit -m "New update from local machine"
   git push origin master
   ```

### Шаг 5: Настройка пользователей через SSH
1. Для команды разработчиков настройте доступ через пользователя `git` на сервере:
   - Создайте пользователя `git` на сервере:
     ```bash
     sudo adduser git
     ```

   - Добавьте SSH-ключи разработчиков в файл `~/.ssh/authorized_keys` пользователя `git`:
     ```bash
     cat id_rsa.pub >> ~/.ssh/authorized_keys
     ```

### Дополнительные задания:
1. Настройте управление доступом к репозиторию для пользователей с правами только на чтение и на запись.
2. Настройте аутентификацию через централизованный сервер, такой как LDAP.

## Вопросы для самопроверки:
1. Как создать голый репозиторий в Git и для чего он используется?
2. Какие преимущества даёт использование SSH для работы с Git?
3. Как настроить доступ нескольких пользователей к одному репозиторию через одного пользователя `git`?

## Ожидаемый результат:
- Вы должны научиться создавать и настраивать репозитории на сервере с использованием SSH для совместной работы.
