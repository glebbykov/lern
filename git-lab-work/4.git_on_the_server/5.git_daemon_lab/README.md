
# Лабораторная работа 5: Настройка Git-демона

## Цель:
Научиться настраивать Git-демон для быстрого доступа к репозиториям без аутентификации через протокол Git.

## Теоретическая часть:
Git-демон позволяет настроить быстрый доступ к Git-репозиториям без аутентификации. Это полезно для публичных проектов или для предоставления доступа на чтение к репозиториям внутри сети, не требуя использования SSH-ключей.

## Шаги для выполнения:

### Шаг 1: Запуск Git-демона вручную
1. Запустите Git-демон с базовым путем для репозиториев:
   ```bash
   git daemon --reuseaddr --base-path=/srv/git/ /srv/git/
   ```

2. Убедитесь, что демон запущен и работает.

### Шаг 2: Настройка демонизированного процесса с помощью systemd
1. Создайте новый файл службы для Git-демона:
   ```bash
   sudo nano /etc/systemd/system/git-daemon.service
   ```

2. Вставьте следующее содержимое в файл:
   ```
   [Unit]
   Description=Start Git Daemon

   [Service]
   ExecStart=/usr/bin/git daemon --reuseaddr --base-path=/srv/git/ /srv/git/

   Restart=always
   RestartSec=500ms

   StandardOutput=syslog
   StandardError=syslog
   SyslogIdentifier=git-daemon

   User=git
   Group=git

   [Install]
   WantedBy=multi-user.target
   ```

3. Сохраните файл и перезапустите systemd для применения изменений:
   ```bash
   sudo systemctl daemon-reload
   ```

4. Включите Git-демон, чтобы он запускался при старте системы:
   ```bash
   sudo systemctl enable git-daemon
   ```

5. Запустите и проверьте статус демона:
   ```bash
   sudo systemctl start git-daemon
   sudo systemctl status git-daemon
   ```

### Шаг 3: Экспорт репозиториев для доступа через Git-демон
1. Создайте файл `git-daemon-export-ok` в репозитории, чтобы сделать его доступным через Git-демон:
   ```bash
   cd /srv/git/project.git
   touch git-daemon-export-ok
   ```

2. Убедитесь, что теперь репозиторий доступен для клонирования:
   ```bash
   git clone git://your_server/project.git
   ```

### Дополнительные задания:
1. Настройте доступ к нескольким репозиториям с использованием Git-демона.
2. Изучите дополнительные параметры Git-демона для настройки логирования и ограничения доступа.

## Вопросы для самопроверки:
1. Какие преимущества использования Git-демона для доступа к репозиториям?
2. Как сделать репозиторий доступным для Git-демона?
3. Какие ограничения и риски связаны с использованием Git-демона для публичного доступа?

## Ожидаемый результат:
- Вы должны научиться настраивать и запускать Git-демон для предоставления доступа к репозиториям через протокол Git без аутентификации.
