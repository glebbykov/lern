# Production Scenarios

Набор типовых инцидентов для отработки диагностики.

## 502/504 upstream timeout
- Симптомы: reverse proxy отвечает 502/504, backend периодически недоступен.
- Диагностика: `docker logs`, `docker inspect`, проверка healthcheck и таймаутов proxy.
- Фиксы: увеличить таймауты, исправить readiness, стабилизировать подключение к БД.

## OOMKilled
- Симптомы: контейнер часто перезапускается, код выхода `137`.
- Диагностика: `docker inspect <container> --format '{{.State.OOMKilled}}'`, `docker stats`.
- Фиксы: лимиты памяти, оптимизация приложения, уменьшение memory spikes.

## DNS деградация
- Симптомы: интермиттирующие ошибки резолва сервисов.
- Диагностика: содержимое `/etc/resolv.conf` в контейнере, `docker network inspect`.
- Фиксы: явный `--dns`/compose dns, нормализация сетевой топологии, уменьшение churn.

## Disk full
- Симптомы: ошибки записи, падения БД/приложения, переполненный диск.
- Диагностика: `docker system df`, анализ лог-драйвера и volume usage.
- Фиксы: log rotation, очистка неиспользуемых образов/томов, квоты/мониторинг диска.
