# Минимальный веб-сервер на Go

```go
package main

import (
        "fmt"
        "net/http"
)

func hello(w http.ResponseWriter, _ *http.Request) {
        fmt.Fprintf(w, "Hello")
}

func main() {
        http.HandleFunc("/", hello)
        http.ListenAndServe("0.0.0.0:8080", nil)
}
```

# Установка Go версии 1.23.4 для Linux

## Шаги установки

1. **Скачайте архив с Go:**

   ```bash
   wget https://go.dev/dl/go1.23.4.linux-amd64.tar.gz
   ```

2. **Проверьте целостность архива (рекомендуется):**

   Сравните SHA256-хеш скачанного файла с официальным значением, чтобы убедиться в его целостности.

   ```bash
   sha256sum go1.23.4.linux-amd64.tar.gz
   ```

   Официальное значение SHA256 для этой версии можно найти на странице загрузок Go.

3. **Удалите предыдущую версию Go (если установлена):**

   ```bash
   sudo rm -rf /usr/local/go
   ```

4. **Распакуйте архив в `/usr/local`:**

   ```bash
   sudo tar -C /usr/local -xzf go1.23.4.linux-amd64.tar.gz
   ```

5. **Добавьте Go в переменную окружения PATH:**

   Добавьте следующую строку в файл `~/.profile` или `~/.bash_profile`:

   ```bash
   export PATH=$PATH:/usr/local/go/bin
   ```

   Затем примените изменения:

   ```bash
   source ~/.profile
   ```
   
   или просто сделайте export:

   ```bash
   export PATH=$PATH:/usr/local/go/bin
   ```

6. **Проверьте установку:**

   ```bash
   go version
   ```

   Вы должны увидеть что-то подобное:

   ```bash
   go version go1.23.4 linux/amd64
   ```

## Запуск веб-сервера

1. **Создайте файл с кодом веб-сервера:**

   Сохраните один из приведённых выше кодов в файл `webserver.go`.

2. **Запустите сервер с помощью команды:**

   ```bash
   go run webserver.go
   ```

   Сервер запустится и будет доступен по адресу:

   ```
   http://localhost:8080
   ```

3. **Тестируйте сервер:**

   - Для минимальной версии:

     ```bash
     curl http://localhost:8080
     ```

     Вы должны увидеть ответ:

     ```
     Hello
     ```

# Практическое задание: Интеграция с сетевым мостом

## Цель
Настроить сетевой мост в Linux и обеспечить взаимодействие веб-сервера с контейнерными сетями через интерфейс моста.

## Шаги настройки

1. **Создание сетевого моста:**

   Добавьте новый bridge-интерфейс с именем `br0`:

   ```bash
   sudo ip link add br0 type bridge
   ```

2. **Подключите физический интерфейс к мосту:**

   Присоедините существующий физический интерфейс (например, `eth0`) к мосту:

   ```bash
   sudo ip link set eth0 master br0
   ```

3. **Создайте виртуальные интерфейсы veth:**

   Создайте пару виртуальных Ethernet-интерфейсов `veth1` и `veth2`:

   ```bash
   sudo ip link add veth1 type veth peer name veth2
   ```

4. **Присоедините виртуальные интерфейсы к мосту:**

   Подключите `veth1` к мосту `br0`:

   ```bash
   sudo ip link set veth1 master br0
   ```

5. **Включите интерфейсы:**

   Активируйте мост и виртуальные интерфейсы:

   ```bash
   sudo ip link set br0 up
   sudo ip link set veth1 up
   sudo ip link set veth2 up
   ```

6. **Назначьте IP-адрес мосту:**

   Присвойте IP-адрес мосту `br0` для проверки подключения:

   ```bash
   sudo ip addr add 192.168.1.1/24 dev br0
   ```

7. **Настройка взаимодействия веб-сервера:**

   Убедитесь, что веб-сервер доступен через мостовой интерфейс `br0`. Перезапустите сервер, чтобы он слушал на IP-адресе моста:

   ```bash
   go run webserver.go
   ```

   Проверьте доступность с помощью команды:

   ```bash
   curl http://192.168.1.1:8080
   ```

8. **Тестирование между пространствами имен:**

   Создайте два пространства имен и подключите их через виртуальные интерфейсы `veth`:

   ```bash
   sudo ip netns add net1
   sudo ip netns add net2
   sudo ip link set veth1 netns net1
   sudo ip link set veth2 netns net2
   ```

   Назначьте IP-адреса виртуальным интерфейсам и проверьте связь между ними через `ping`.
