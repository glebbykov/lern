Основное применение команд useradd и groupadd в Linux
useradd
useradd — команда для создания нового пользователя в системе. Она используется системными администраторами для добавления учетных записей пользователей с базовой настройкой.

Основные опции:

-m — создает домашнюю директорию пользователя, если она не существует.
-s /bin/bash — задает оболочку по умолчанию для пользователя, например, Bash.
-d /home/username — указывает путь к домашней директории пользователя.
-G — добавляет пользователя в одну или несколько дополнительных групп.
-e — устанавливает дату, когда учётная запись будет отключена.
Примеры использования:

Создание нового пользователя с домашней директорией и Bash в качестве оболочки:


sudo useradd -m -s /bin/bash username
Создание пользователя и добавление его в группу developers:


sudo useradd -m -G developers username
Создание пользователя с указанной датой отключения учётной записи:


sudo useradd -m -e 2024-12-31 username
groupadd
groupadd — команда для создания новой группы в системе. Она позволяет управлять группами пользователей, что упрощает управление правами доступа.

Основные опции:

-g GID — задает идентификатор группы (Group ID, GID).

Группы в Linux идентифицируются с помощью числового идентификатора, известного как GID. По умолчанию GID назначается автоматически, но иногда требуется задать конкретное значение, например, для обеспечения совместимости с другими системами или при необходимости использования определенных чисел для управления правами доступа.

Пример использования:

Создание группы engineers с GID 1050:

sudo groupadd -g 1050 engineers

В этом примере группа engineers создаётся с идентификатором 1050. Это может быть полезно в системах, где управление правами доступа привязано к конкретным числам.

-r — создает системную группу.

Системные группы предназначены для использования операционной системой и её службами, а не для обычных пользователей. Такие группы обычно имеют GID ниже 1000, что отделяет их от групп обычных пользователей.

Пример использования:

Создание системной группы sysgroup:


sudo groupadd -r sysgroup
При использовании -r группа будет создана с GID, который автоматически выбирается из диапазона для системных групп (обычно ниже 1000). Такие группы используются для фоновых задач и сервисов, которые не должны взаимодействовать с обычными пользователями.

Зачем это нужно?
Эти опции позволяют:

Управлять группами на более детальном уровне, что важно для систем с множеством пользователей и сервисов.
Создавать группы с нужными правами доступа, обеспечивая безопасность и правильное разграничение доступа в системе.
Разделять группы системных служб и обычных пользователей для упрощения администрирования и безопасности системы.

Создание группы с именем developers:


sudo groupadd developers
Создание группы с определённым GID:

sudo groupadd -g 1050 engineers
Создание системной группы:

sudo groupadd -r sysgroup
Эти команды являются важными инструментами для управления пользователями и группами в Linux, позволяя легко создавать новые учетные записи, задавать параметры пользователей и групп, и контролировать доступ к ресурсам системы.

Чтобы просмотреть все группы, используйте команду:

cat /etc/group

Чтобы просмотреть всех пользователей, используйте команду:

cat /etc/passwd

посмотреть группы конеретного пользователя:

id user1

Удалить пользователя:

sudo userdel username